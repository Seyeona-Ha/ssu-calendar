<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>SSU 학사 캘린더 구독</title>
  <!-- GA4 gtag: 본인 측정ID로 교체 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-43NXY72THF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-43NXY72THF'); // ← 본인 GA4 ID

    function isIOS(){
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    function redirect(){
      const icsHttps = 'https://seyeona-ha.github.io/yourssu-calender/ssu_2025_09.ics';
      const icsWebcal = 'webcal://seyeona-ha.github.io/yourssu-calender/ssu_2025_09.ics';

      if (isIOS()) {
        gtag('event', 'click_ios_webcal');
        // iOS: 애플 캘린더 자동 구독
        window.location.href = icsWebcal;
      } else {
        // Android/PC: 안내 보여주기
        document.getElementById('android').style.display = 'block';
        document.getElementById('dl').href = icsHttps;
        gtag('event', 'show_android_help');
      }
    }

    document.addEventListener('DOMContentLoaded', redirect);
  </script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 24px; }
    .card { max-width: 680px; margin: 0 auto; border: 1px solid #ddd; border-radius: 12px; padding: 20px; }
    h1 { margin-top: 0; }
    #android { display: none; }
    a.button { display: inline-block; padding: 10px 14px; border-radius: 8px; border: 1px solid #333; text-decoration: none; }
  </style>
</head>
<body>
  <div class="card" id="android">
    <h1>학사 일정 캘린더 추가</h1>
    <p>iPhone은 자동으로 애플 캘린더에 구독됩니다.</p>
    <h3>Android/PC 안내</h3>
    <ol>
      <li><a id="dl" class="button" onclick="gtag('event','click_android_download')" href="#">.ics 파일 다운로드</a></li>
      <li>갤럭시: 다운로드 후 “삼성 캘린더로 열기” → 일정 추가</li>
      <li>구글 캘린더 사용자: <b>PC 웹</b>에서 “URL로 추가”로 아래 주소를 등록<br>
        <code>https://seyeona-ha.github.io/yourssu-calender/ssu_2025_09.ics</code>
      </li>
    </ol>
  </div>
</body>
</html>
